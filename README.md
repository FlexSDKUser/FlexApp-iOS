# [Flextudio](https://flextudio.com) SDK for iOS

[![Platform](https://img.shields.io/badge/platform-ios-orange.svg)](https://github.com/FlexSDKUser/FlexApp-iOS)
[![Languages](https://img.shields.io/badge/language-swift-orange.svg)](https://github.com/FlexSDKUser/FlexApp-iOS)


## Table of contents

1.  [Introduction](#introduction)
1.  [Requirements](#requirements)
1.  [Quick start](#quick-start)
1.  [Step by step](#step-by-step)


## Introduction

The Flextudio SDK for iOS allows us to easily build native app to run modules developed in flextudio.
<br />

### How it works

The Flextudio SDK enables use of all features and services supported by flextudio platform. By simply adding the SDK dependencies into a new iOS app project, a fully functional flex app can be built without any other setup or initalization.

## Requirements

The minimum requirements for the Flextudio SDK for iOS are:
- `Xcode 13.0 or higher`
- `Swift 5.1 or higher`
- `iOS 13.0 or higher`
- `Cocoapods`

> **Note**: Flextudio SDK includes initialization of firebase push notification and other dependencies. You are only required to include google-services.plist corresponding to your package Id to take full advantage of flextudio push notification services.

## Quick start

You can download the source code for sample app from this repository and open it in your xcode for one step installation and testing.

## Step by step
Follow the steps below to create a new app of your own using Flextudio SDK.

### Step 1: Create new ios app project in Xcode..
Open Xcode and create a new iOS app project with storyboard as a template.
File > New > Project > Select App...click Next.
![Create new ios app](https://create-s3-test1.s3.ap-northeast-2.amazonaws.com/readme-ios-sdk/createproj.png "Create new ios app")
Provide your desired product name and organization identifier.
Select Storyboard from Interface dropdown menu.
Click Next and then click Finish.
> **Note**: You need this bundle identifier to generate google-services.plist file for your application to support firebase push notification and other services.


### Step 2: Open a terminal at project location. Create `Podfile` for the project using command **pod init**:
```
$ pod init
```
### Step 3: In `Podfile`, add source and  FlextudioSDK
Open Podfile and place FlextudioSDK dependency under target 'yourproject'
```
# platform :ios, '13.0'
source 'https://github.com/CocoaPods/Specs.git'
source 'https://github.com/FlexSDKCreator/SDK_ios_podspec.git'

target 'yourproject' do
  # Comment the next line if you don't want to use dynamic frameworks
  use_frameworks!	
  # Pods for yourproject
  #Add FlextudioSDK pod with specific version
  pod 'FlextudioSDK', '1.0.0'
  end

```

### Step 4: 	Run pod install command in terminal.

```
$ pod install
```
Wait until all dependencies are download and follow the instruction in terminal.

### Step 5: Please close any current Xcode sessions and open `yourproject.xcworkspace` for this project from now on.
After pod installation, new files are generated by dependencies. Go to your project location and find `yourproject.xcworkspace`  file and open it with xcode.

### Step 6: Select the target and navigate to the Build Phases tab. Click the Add button (+) and select New Copy Files Phase. 

It creates **Copy Files section**. From **Copy Bundle Resources** move **Assets.xcassets** to** Copy Files section** by drag and drop.

### Step 7: Navigate to **Targets** -> Your App -> **Signing & Capabilities** -> add  **Background Modes** and check **Remote notifications**, Push Notification.

### Step 8: Add these permission required for framework in your project `Info.plist`. 
a.	Privacy - Calendars Usage Description
b.	Privacy - Camera Usage Description
c.	Privacy - Contacts Usage Description
d.	Privacy - Location Always and When In Use Usage Description
e.	Privacy - Location Always Usage Description
f.	Privacy - Location When In Use Usage Description
g.	Privacy - Microphone Usage Description
h.	Privacy - Photo Library Additions Usage Description
i.	Privacy - Photo Library Usage Description
j.	Privacy - Location Temporary Usage Description Dictionary

Note:  Alternately, you can add these permission by directly copying below code and add it inside <dict> element in your `Info.plist`(Right click your Info.plist and select **open as source code**).
```
<key>NSAppTransportSecurity</key>
	<dict>
		<key>NSAllowsArbitraryLoads</key>
		<true/>
	</dict>
	<key>NSCalendarsUsageDescription</key>
	<string>App needs to access the calendar to track events</string>
	<key>NSCameraUsageDescription</key>
	<string>Used to take picture and barcode</string>
	<key>NSContactsUsageDescription</key>
	<string>App needs to use contacts</string>
	<key>NSLocationAlwaysAndWhenInUseUsageDescription</key>
	<string>This app requires your location information to save and query data. </string>
	<key>NSLocationAlwaysUsageDescription</key>
	<string>This app requires your location information to save and query data. </string>
	<key>NSLocationTemporaryUsageDescriptionDictionary</key>
	<dict>
		<key>AccuracyRequired</key>
		<string>This app needs accurate location</string>
	</dict>
	<key>NSLocationWhenInUseUsageDescription</key>
	<string>This app requires your location information to save and query data. </string>
	<key>NSMicrophoneUsageDescription</key>
	<string>App needs to access your micophone for video recording</string>
	<key>NSPhotoLibraryAddUsageDescription</key>
	<string>We need to write photos</string>
	<key>NSPhotoLibraryUsageDescription</key>
	<string>Used to get images</string>
```



### Step 9: Add these code in SceneDelegate.
```
func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        guard let winScene = (scene as? UIWindowScene) else { return }
        
        let win = UIWindow(windowScene: winScene)
        win.rootViewController = createRootViewController()
        win.makeKeyAndVisible()

        window = win
    }
    
    func createRootViewController() -> UIViewController {
        let flexBundle = Bundle(for: MainMasterDetailVC.self)
        let storyboard = UIStoryboard(name: "FlexSDK", bundle: flexBundle)
        return storyboard.instantiateInitialViewController() ?? UIViewController()
    }
	
```
Now, build  and run the project.


PS : to recieve push notification we need your p8 key files which is issued from Apple Development Center
	refer to this site : https://fluffy.es/p8-push-notification/
	in Korean - https://helloworld.fingerpush.com/apns-p8-파일-생성/
